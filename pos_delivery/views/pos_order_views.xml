<odoo>
  <data>

    <!-- Extend POS Order Form View -->
    <record id="view_pos_order_form_delivery" model="ir.ui.view">
      <field name="name">pos.order.form.delivery</field>
      <field name="model">pos.order</field>
      <field name="inherit_id" ref="point_of_sale.view_pos_pos_form"/>
      <field name="arch" type="xml">
        
        <!-- Add Smart Button for Delivery -->
        <xpath expr="//div[@name='button_box']" position="inside">
          <button name="action_view_delivery_order" 
                  type="object" 
                  class="oe_stat_button" 
                  icon="fa-truck"
                  invisible="delivery_order_count == 0">
            <field name="delivery_order_count" widget="statinfo" string="Delivery"/>
          </button>
          
          <!-- Create Delivery Button -->
          <button name="action_create_delivery_order" 
                  type="object" 
                  class="oe_stat_button btn-primary" 
                  icon="fa-motorcycle"
                  invisible="delivery_order_count > 0">
            <div class="o_stat_info">
              <span class="o_stat_text">Create</span>
              <span class="o_stat_text">Delivery</span>
            </div>
          </button>
        </xpath>

        <!-- Add Delivery Fields -->
        <xpath expr="//field[@name='partner_id']" position="after">
          <field name="is_delivery" invisible="1"/>
          <field name="delivery_order_id" invisible="1"/>
        </xpath>

      </field>
    </record>

  </data>
</odoo>

